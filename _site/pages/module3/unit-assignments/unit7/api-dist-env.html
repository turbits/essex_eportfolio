<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Trevor’s University of Essex ePortfolio</title>
<meta name="generator" content="Jekyll v4.3.2" />
<meta property="og:title" content="Trevor’s University of Essex ePortfolio" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="http://localhost:4000/pages/module3/unit-assignments/unit7/api-dist-env.html" />
<meta property="og:url" content="http://localhost:4000/pages/module3/unit-assignments/unit7/api-dist-env.html" />
<meta property="og:site_name" content="Trevor’s University of Essex ePortfolio" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Trevor’s University of Essex ePortfolio" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","headline":"Trevor’s University of Essex ePortfolio","url":"http://localhost:4000/pages/module3/unit-assignments/unit7/api-dist-env.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css"/>

    <link rel="shortcut icon" type="image/png" href="http://localhost:4000//favicon.png" />
  </head>
<body><header class="site-header">

    <div class="wrapper"><!-- <a class="site-title" rel="author" href="/">Trevor&#39;s University of Essex ePortfolio</a> -->
      <a class="site-title" rel="author" href="/">
        <img height="80px" width="auto" src="/assets/wsg_logo.png" alt="Trevor&#39;s University of Essex ePortfolio" />
        <div class="site-title-text">
          <p class="title-text">TREVOR WOODMAN</p>
          <p class="subtitle-text">UoEO ePortfolio</p>
        </div>
      </a></div>
  </header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  

  <header class="post-header">
    <h1 class="post-title"></h1>
  </header>

  <div class="post-content">
    <p>⬅️<a href="/pages/module3/unit-assignments/unit7/m3u7.html">Back</a></p>

<h1 id="unit-7-developing-an-api-for-a-distributed-environment">Unit 7: Developing an API for a Distributed Environment</h1>

<p>Unit assignment questions and answers to follow.</p>

<h2 id="requirements">Requirements</h2>

<p>In this session, you will create a RESTful API which can be used to create and delete user records. Responses to the questions should be recorded in your e-portfolio.</p>

<p>You are advised to use these techniques to create an API for your team’s submission in Unit 11 and be prepared to demonstrate it during next week’s seminar (Unit 10). Remember that you can arrange a session with the tutor during office hours for more support, if required.</p>

<p>Using the Jupyter Notebook workspace, create a file named api.py and copy the following code into it (a copy is provided for upload to Codio/GitHub): You can install Jupyter Notebook on your local machine following these instructions or via the University of Essex Software Hub.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1">#source of code: https://codeburst.io/this-is-how-easy-it-is-to-create-a-rest-api-8a25122ab1f3
</span>

<span class="kn">from</span> <span class="n">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="n">flask_restful</span> <span class="kn">import</span> <span class="n">Api</span><span class="p">,</span> <span class="n">Resource</span><span class="p">,</span> <span class="n">reqparse</span>
 
<span class="n">app</span> <span class="o">=</span> <span class="nc">Flask</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>
<span class="n">api</span> <span class="o">=</span> <span class="nc">Api</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
 
<span class="n">users</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="sh">"</span><span class="s">name</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">James</span><span class="sh">"</span><span class="p">,</span>
        <span class="sh">"</span><span class="s">age</span><span class="sh">"</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
        <span class="sh">"</span><span class="s">occupation</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">Network Engineer</span><span class="sh">"</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="sh">"</span><span class="s">name</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">Ann</span><span class="sh">"</span><span class="p">,</span>
        <span class="sh">"</span><span class="s">age</span><span class="sh">"</span><span class="p">:</span> <span class="mi">32</span><span class="p">,</span>
        <span class="sh">"</span><span class="s">occupation</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">Doctor</span><span class="sh">"</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="sh">"</span><span class="s">name</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">Jason</span><span class="sh">"</span><span class="p">,</span>
        <span class="sh">"</span><span class="s">age</span><span class="sh">"</span><span class="p">:</span> <span class="mi">22</span><span class="p">,</span>
        <span class="sh">"</span><span class="s">occupation</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">Web Developer</span><span class="sh">"</span>
    <span class="p">}</span>
<span class="p">]</span>
 
<span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">users</span><span class="p">:</span>
            <span class="nf">if</span><span class="p">(</span><span class="n">name</span> <span class="o">==</span> <span class="n">user</span><span class="p">[</span><span class="sh">"</span><span class="s">name</span><span class="sh">"</span><span class="p">]):</span>
                <span class="k">return</span> <span class="n">user</span><span class="p">,</span> <span class="mi">200</span>
        <span class="k">return</span> <span class="sh">"</span><span class="s">User not found</span><span class="sh">"</span><span class="p">,</span> <span class="mi">404</span>
 
    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">reqparse</span><span class="p">.</span><span class="nc">RequestParser</span><span class="p">()</span>
        <span class="n">parser</span><span class="p">.</span><span class="nf">add_argument</span><span class="p">(</span><span class="sh">"</span><span class="s">age</span><span class="sh">"</span><span class="p">)</span>
        <span class="n">parser</span><span class="p">.</span><span class="nf">add_argument</span><span class="p">(</span><span class="sh">"</span><span class="s">occupation</span><span class="sh">"</span><span class="p">)</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="p">.</span><span class="nf">parse_args</span><span class="p">()</span>
 
        <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">users</span><span class="p">:</span>
            <span class="nf">if</span><span class="p">(</span><span class="n">name</span> <span class="o">==</span> <span class="n">user</span><span class="p">[</span><span class="sh">"</span><span class="s">name</span><span class="sh">"</span><span class="p">]):</span>
                <span class="k">return</span> <span class="sh">"</span><span class="s">User with name {} already exists</span><span class="sh">"</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">name</span><span class="p">),</span> <span class="mi">400</span>
 
        <span class="n">user</span> <span class="o">=</span> <span class="p">{</span>
            <span class="sh">"</span><span class="s">name</span><span class="sh">"</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span>
            <span class="sh">"</span><span class="s">age</span><span class="sh">"</span><span class="p">:</span> <span class="n">args</span><span class="p">[</span><span class="sh">"</span><span class="s">age</span><span class="sh">"</span><span class="p">],</span>
            <span class="sh">"</span><span class="s">occupation</span><span class="sh">"</span><span class="p">:</span> <span class="n">args</span><span class="p">[</span><span class="sh">"</span><span class="s">occupation</span><span class="sh">"</span><span class="p">]</span>
        <span class="p">}</span>
        <span class="n">users</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">user</span><span class="p">,</span> <span class="mi">201</span>
 
    <span class="k">def</span> <span class="nf">put</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">reqparse</span><span class="p">.</span><span class="nc">RequestParser</span><span class="p">()</span>
        <span class="n">parser</span><span class="p">.</span><span class="nf">add_argument</span><span class="p">(</span><span class="sh">"</span><span class="s">age</span><span class="sh">"</span><span class="p">)</span>
        <span class="n">parser</span><span class="p">.</span><span class="nf">add_argument</span><span class="p">(</span><span class="sh">"</span><span class="s">occupation</span><span class="sh">"</span><span class="p">)</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="p">.</span><span class="nf">parse_args</span><span class="p">()</span>
 
        <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">users</span><span class="p">:</span>
            <span class="nf">if</span><span class="p">(</span><span class="n">name</span> <span class="o">==</span> <span class="n">user</span><span class="p">[</span><span class="sh">"</span><span class="s">name</span><span class="sh">"</span><span class="p">]):</span>
                <span class="n">user</span><span class="p">[</span><span class="sh">"</span><span class="s">age</span><span class="sh">"</span><span class="p">]</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="sh">"</span><span class="s">age</span><span class="sh">"</span><span class="p">]</span>
                <span class="n">user</span><span class="p">[</span><span class="sh">"</span><span class="s">occupation</span><span class="sh">"</span><span class="p">]</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="sh">"</span><span class="s">occupation</span><span class="sh">"</span><span class="p">]</span>
                <span class="k">return</span> <span class="n">user</span><span class="p">,</span> <span class="mi">200</span>
        
        <span class="n">user</span> <span class="o">=</span> <span class="p">{</span>
            <span class="sh">"</span><span class="s">name</span><span class="sh">"</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span>
            <span class="sh">"</span><span class="s">age</span><span class="sh">"</span><span class="p">:</span> <span class="n">args</span><span class="p">[</span><span class="sh">"</span><span class="s">age</span><span class="sh">"</span><span class="p">],</span>
            <span class="sh">"</span><span class="s">occupation</span><span class="sh">"</span><span class="p">:</span> <span class="n">args</span><span class="p">[</span><span class="sh">"</span><span class="s">occupation</span><span class="sh">"</span><span class="p">]</span>
        <span class="p">}</span>
        <span class="n">users</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">user</span><span class="p">,</span> <span class="mi">201</span>
 
    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="k">global</span> <span class="n">users</span>
        <span class="n">users</span> <span class="o">=</span> <span class="p">[</span><span class="n">user</span> <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">users</span> <span class="k">if</span> <span class="n">user</span><span class="p">[</span><span class="sh">"</span><span class="s">name</span><span class="sh">"</span><span class="p">]</span> <span class="o">!=</span> <span class="n">name</span><span class="p">]</span>
        <span class="k">return</span> <span class="sh">"</span><span class="s">{} is deleted.</span><span class="sh">"</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">name</span><span class="p">),</span> <span class="mi">200</span>
      
<span class="n">api</span><span class="p">.</span><span class="nf">add_resource</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="sh">"</span><span class="s">/user/&lt;string:name&gt;</span><span class="sh">"</span><span class="p">)</span>
 
<span class="n">app</span><span class="p">.</span><span class="nf">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</code></pre></div></div>

<hr />

<h2 id="questions">Questions</h2>

<h3 id="question-1">Question 1</h3>
<ul>
  <li>Run the API.py code. Take a screenshot of the terminal output. What command did you use to compile and run the code?</li>
</ul>

<p>The unit assignment says to use Jupyter notebook in the Codio environment, but it appears that the packages required to run flask are not able to be installed:</p>

<p>pip install flask</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ERROR: Could not install packages due to an EnvironmentError: [Errno 13] Permission denied: '/usr/local/lib/python3.6/dist-packages/itsdangerous'
Consider using the `--user` option or check the permissions.
</code></pre></div></div>

<p>This is the output when run from my local machine after installing <code class="language-plaintext highlighter-rouge">flask</code> and <code class="language-plaintext highlighter-rouge">flask_restful</code> and using <code class="language-plaintext highlighter-rouge">python api_dist.py</code> to start it:</p>

<p><img src="/pages/module3/unit-assignments/unit7/api-dist-out.jpg" alt="" /></p>

<h3 id="question-2">Question 2</h3>
<ul>
  <li>Run the following command at the terminal prompt: w3m http://127.0.0.1:5000/user/Ann</li>
  <li>What happens when this command is run, and why?</li>
</ul>

<p>Since I’m not using Linux and I won’t be looking for a way to run it on Windows, I’ll show the output from Postman instead.</p>

<p>When sending a GET request from Postman to <code class="language-plaintext highlighter-rouge">http://127.0.0.1:5000/user/Ann</code> I get the following response:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ann"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"age"</span><span class="p">:</span><span class="w"> </span><span class="mi">32</span><span class="p">,</span><span class="w">
    </span><span class="nl">"occupation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Doctor"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h3 id="question-3">Question 3</h3>
<ul>
  <li>Run the following command at the terminal prompt: w3m http://127.0.0.1:5000/user/Adam</li>
  <li>What happens when this command is run, and why?</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"User not found"
</code></pre></div></div>

<h3 id="question-4">Question 4</h3>
<ul>
  <li>What capability is achieved by the flask library?</li>
</ul>

<p>Flask is a lightweight web framework for Python. It’s classified as a microframework, which means that it does not include many built-in features from a more complex framework, such as Django, but it offers a simple and extendable base for building web applications.</p>

<p>Flask has some key features, such as routing, templating, and form handling, that make it quick and easy to build a lightweight web application.</p>

<h3 id="architecture-evolution-activity">Architecture Evolution Activity</h3>
<ul>
  <li>Based on your reading this week, could you write a section that might be appended to this paper, Salah et al, 2016, which would present the next phase of evolution history, from microservices to the technologies which are commonly in use today?</li>
</ul>

<p>Since this paper was written, there have been several key developments from a software architecture perspective. One of the most significant trends is containerization, using technology such as Docker. Containers are a portable and lightweight way to package software. Another development has been the rise of serverless architecture, a logical progression from the classic model of on premises servers to the cloud. Cloud computing offers a level of scalability, flexibility, and cost-efficiency never seen before. It also has the benefit of exchanging capital expenses for operational expenses, something that most companies would deem a very positive change.</p>

  </div>

  

</article>

      </div>
    </main>

  </body>

</html>
