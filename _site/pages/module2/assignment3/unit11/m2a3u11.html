<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Trevor’s University of Essex ePortfolio</title>
<meta name="generator" content="Jekyll v4.3.2" />
<meta property="og:title" content="Trevor’s University of Essex ePortfolio" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="http://localhost:4000/pages/module2/assignment3/unit11/m2a3u11.html" />
<meta property="og:url" content="http://localhost:4000/pages/module2/assignment3/unit11/m2a3u11.html" />
<meta property="og:site_name" content="Trevor’s University of Essex ePortfolio" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Trevor’s University of Essex ePortfolio" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","headline":"Trevor’s University of Essex ePortfolio","url":"http://localhost:4000/pages/module2/assignment3/unit11/m2a3u11.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Trevor&apos;s University of Essex ePortfolio" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Trevor&#39;s University of Essex ePortfolio</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/pages/module0.html">Module 0</a><a class="page-link" href="/pages/module1.html">Module 1</a><a class="page-link" href="/pages/module2.html">Module 2</a><a class="page-link" href="/pages/module3.html">Module 3</a><a class="page-link" href="/pages/module4.html">Module 4</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title"></h1>
  </header>

  <div class="post-content">
    <p>⬅️<a href="/pages/module2/assignment3/m2a3.html">Back</a></p>

<h2 id="module-2-assignment-3-unit-11">Module 2: Assignment 3: Unit 11</h2>

<p>This unit did not have specific activities for the e-portfolio other than to continue eportfolio updates.</p>

<p>I think spending hours on standing up jekyll and trying to get it to work with github pages (and due to version mismatches, modern jekyll versions not working with github pages, etc.) counts as contributing to the eportfolio. In the end, I could not get it working properly with github pages, and if you go around and look at GitHub comments and others writing articles on the internet it has always been an issue. The documentation on GitHub is lacking, and so is the Jekyll documentation.</p>

<p>So in the end, I set it up on my VPS. It is hosted at <a href="https//essex.trevorwoodman.ca">https://essex.trevorwoodman.ca</a>. I stood up nginx, created a server block, set up semi-automated build and deployment of the site using a bash script. The script still has to be run manually, I did not want to spend the time working on trying to make git hooks function, but eventually I will make it work with git hooks to automatically build and deploy the site on a <code class="language-plaintext highlighter-rouge">git push</code> to the repository.</p>

<p>Below you’ll find the bash script.</p>

<h3 id="deploy-script">Deploy Script</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash -e</span>

<span class="c"># github repo</span>
<span class="nv">REMOTE</span><span class="o">=</span>https://github.com/turbits/essex_eportfolio.git
<span class="c"># temp dir to build repo</span>
<span class="nv">BUILDDIR</span><span class="o">=</span><span class="nv">$HOME</span>/staging_area
<span class="c"># server block where nginx looks for content to serve</span>
<span class="nv">WWW</span><span class="o">=</span>/var/www/essex.trevorwoodman.ca/html
<span class="c"># backup folder in case of error</span>
<span class="nv">WWWBAK</span><span class="o">=</span><span class="nv">$HOME</span>/backup_html

<span class="c"># if err, revert to backup</span>
<span class="k">function </span>err_cleanup <span class="o">{</span>
        <span class="nb">echo</span> <span class="s2">"ERR: Reverting backup"</span>
        rsync <span class="nt">-aqz</span> <span class="nt">--del</span> <span class="nv">$WWWBAK</span>/ <span class="nv">$WWW</span>
        <span class="nb">rm</span> <span class="nt">-rf</span> <span class="nv">$BUILDDIR</span>
<span class="o">}</span>

<span class="c"># if err, call cleanup</span>
<span class="nb">trap </span>cleanup EXIT

<span class="c"># explode builddir</span>
<span class="nb">rm</span> <span class="nt">-rf</span> <span class="nv">$BUILDDIR</span>

<span class="c"># make backup of current site</span>
rsync <span class="nt">-aqz</span> <span class="nv">$WWW</span>/ <span class="nv">$WWWBAK</span>

<span class="c"># clone from remote</span>
git clone <span class="nv">$REMOTE</span> <span class="nv">$BUILDDIR</span>

<span class="c"># delete old version</span>
<span class="nb">rm</span> <span class="nt">-rf</span> <span class="nv">$WWW</span>/<span class="k">*</span>

<span class="c"># bundle install/build jekyll site/deploy to www</span>
<span class="nb">cd</span> <span class="nv">$BUILDDIR</span>
bundle <span class="nb">install
</span>bundle <span class="nb">exec </span>jekyll build <span class="nt">-d</span> <span class="nv">$WWW</span>
<span class="nb">cd</span> ..

<span class="c"># explode builddir</span>
<span class="nb">rm</span> <span class="nt">-rf</span> <span class="nv">$BUILDDIR</span>

<span class="c"># no errors - exit clean</span>
<span class="nb">trap</span> - EXIT
</code></pre></div></div>

  </div>

</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Trevor&#39;s University of Essex ePortfolio</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Trevor&#39;s University of Essex ePortfolio</li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"></ul>
</div>

      <div class="footer-col footer-col-3">
        <p></p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
