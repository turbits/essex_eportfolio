<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Trevor‚Äôs University of Essex ePortfolio</title>
<meta name="generator" content="Jekyll v4.3.2" />
<meta property="og:title" content="Trevor‚Äôs University of Essex ePortfolio" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="http://localhost:4000/pages/module2/unit-assignments/unit11/m2u11.html" />
<meta property="og:url" content="http://localhost:4000/pages/module2/unit-assignments/unit11/m2u11.html" />
<meta property="og:site_name" content="Trevor‚Äôs University of Essex ePortfolio" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Trevor‚Äôs University of Essex ePortfolio" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","headline":"Trevor‚Äôs University of Essex ePortfolio","url":"http://localhost:4000/pages/module2/unit-assignments/unit11/m2u11.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css"/>

    <link rel="shortcut icon" type="image/png" href="http://localhost:4000//favicon.png" />
  </head>
<body><header class="site-header">

  <div class="wrapper"><!-- <a class="site-title" rel="author" href="/">Trevor&#39;s University of Essex ePortfolio</a> -->
    <a class="site-title" rel="author" href="/%20/">
      <!-- <img height="80px" width="auto" src="/assets/wsg_logo.png" alt="Trevor&#39;s University of Essex ePortfolio" /> -->
      <p class="site-title-icon wave-anim">üëΩ</p>
      <div class="site-title-text">
        <p class="title-text">TREVOR WOODMAN</p>
        <p class="subtitle-text">UoEO ePortfolio</p>
      </div>
    </a></div>

  <nav>
    <ul>
      <li><a href="/">Home</a></li>
      <li><a href="/pages/module0.html">M0:Induction</a></li>
      <li><a href="/pages/module1.html">M1:LCS</a></li>
      <li><a href="/pages/module2.html">M2:OOP</a></li>
      <li><a href="/pages/module3.html">M3:SSD</a></li>
      <li><a href="/pages/module4.html">M4:NS</a></li>
      <li><a href="/pages/module5.html">M5:RMPP</a></li>
      <li><a href="/pages/module6.html">M6:SEPM</a></li>
    </ul>
  </nav>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  

  <header class="post-header">
    <h1 class="post-title"></h1>
  </header>

  <div class="post-content">
    <p>‚¨ÖÔ∏è<a href="/pages/module2.html">Back</a></p>

<h1 id="unit-11-pointers-references--memory-and-design-patterns">Unit 11: Pointers, References &amp; Memory, and Design Patterns</h1>

<p>This unit did not have specific activities for the e-portfolio other than to continue eportfolio updates.</p>

<p>I think spending hours on standing up jekyll and trying to get it to work with github pages (and due to version mismatches, modern jekyll versions not working with github pages, etc.) counts as contributing to the eportfolio. In the end, I could not get it working properly with github pages, and if you go around and look at GitHub comments and others writing articles on the internet it has always been an issue. The documentation on GitHub is lacking, and so is the Jekyll documentation.</p>

<p>So in the end, I set it up on my VPS. It is hosted at <a href="https//essex.trevorwoodman.ca">https://essex.trevorwoodman.ca</a>. I stood up nginx, created a server block, set up semi-automated build and deployment of the site using a bash script. The script still has to be run manually, I did not want to spend the time working on trying to make git hooks function, but eventually I will make it work with git hooks to automatically build and deploy the site on a <code class="language-plaintext highlighter-rouge">git push</code> to the repository.</p>

<p>Below you‚Äôll find the bash script.</p>

<h2 id="deploy-script">Deploy Script</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash -e</span>

<span class="c"># github repo</span>
<span class="nv">REMOTE</span><span class="o">=</span>https://github.com/turbits/essex_eportfolio.git
<span class="c"># temp dir to build repo</span>
<span class="nv">BUILDDIR</span><span class="o">=</span><span class="nv">$HOME</span>/staging_area
<span class="c"># server block where nginx looks for content to serve</span>
<span class="nv">WWW</span><span class="o">=</span>/var/www/essex.trevorwoodman.ca/html
<span class="c"># backup folder in case of error</span>
<span class="nv">WWWBAK</span><span class="o">=</span><span class="nv">$HOME</span>/backup_html

<span class="c"># if err, revert to backup</span>
<span class="k">function </span>err_cleanup <span class="o">{</span>
        <span class="nb">echo</span> <span class="s2">"ERR: Reverting backup"</span>
        rsync <span class="nt">-aqz</span> <span class="nt">--del</span> <span class="nv">$WWWBAK</span>/ <span class="nv">$WWW</span>
        <span class="nb">rm</span> <span class="nt">-rf</span> <span class="nv">$BUILDDIR</span>
<span class="o">}</span>

<span class="c"># if err, call cleanup</span>
<span class="nb">trap </span>cleanup EXIT

<span class="c"># explode builddir</span>
<span class="nb">rm</span> <span class="nt">-rf</span> <span class="nv">$BUILDDIR</span>

<span class="c"># make backup of current site</span>
rsync <span class="nt">-aqz</span> <span class="nv">$WWW</span>/ <span class="nv">$WWWBAK</span>

<span class="c"># clone from remote</span>
git clone <span class="nv">$REMOTE</span> <span class="nv">$BUILDDIR</span>

<span class="c"># delete old version</span>
<span class="nb">rm</span> <span class="nt">-rf</span> <span class="nv">$WWW</span>/<span class="k">*</span>

<span class="c"># bundle install/build jekyll site/deploy to www</span>
<span class="nb">cd</span> <span class="nv">$BUILDDIR</span>
bundle <span class="nb">install
</span>bundle <span class="nb">exec </span>jekyll build <span class="nt">-d</span> <span class="nv">$WWW</span>
<span class="nb">cd</span> ..

<span class="c"># explode builddir</span>
<span class="nb">rm</span> <span class="nt">-rf</span> <span class="nv">$BUILDDIR</span>

<span class="c"># no errors - exit clean</span>
<span class="nb">trap</span> - EXIT
</code></pre></div></div>

  </div>

  

</article>

      </div>
    </main>

  </body>

</html>
