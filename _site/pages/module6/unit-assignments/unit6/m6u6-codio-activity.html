<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Trevor‚Äôs University of Essex ePortfolio</title>
<meta name="generator" content="Jekyll v4.3.2" />
<meta property="og:title" content="Trevor‚Äôs University of Essex ePortfolio" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="http://localhost:4000/pages/module6/unit-assignments/unit6/m6u6-codio-activity.html" />
<meta property="og:url" content="http://localhost:4000/pages/module6/unit-assignments/unit6/m6u6-codio-activity.html" />
<meta property="og:site_name" content="Trevor‚Äôs University of Essex ePortfolio" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Trevor‚Äôs University of Essex ePortfolio" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","headline":"Trevor‚Äôs University of Essex ePortfolio","url":"http://localhost:4000/pages/module6/unit-assignments/unit6/m6u6-codio-activity.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css"/>

    <link rel="shortcut icon" type="image/png" href="http://localhost:4000//favicon.png" />
  </head>
<body><header class="site-header">

  <div class="wrapper"><!-- <a class="site-title" rel="author" href="/">Trevor&#39;s University of Essex ePortfolio</a> -->
    <a class="site-title" rel="author" href="/%20/">
      <!-- <img height="80px" width="auto" src="/assets/wsg_logo.png" alt="Trevor&#39;s University of Essex ePortfolio" /> -->
      <p class="site-title-icon wave-anim">üëΩ</p>
      <div class="site-title-text">
        <p class="title-text">TREVOR WOODMAN</p>
        <p class="subtitle-text">UoEO ePortfolio</p>
      </div>
    </a></div>

  <nav>
    <ul>
      <li><a href="/">Home</a></li>
      <li><a href="/pages/module0.html">M0:Induction</a></li>
      <li><a href="/pages/module1.html">M1:LCS</a></li>
      <li><a href="/pages/module2.html">M2:OOP</a></li>
      <li><a href="/pages/module3.html">M3:SSD</a></li>
      <li><a href="/pages/module4.html">M4:NS</a></li>
      <li><a href="/pages/module5.html">M5:RMPP</a></li>
      <li><a href="/pages/module6.html">M6:SEPM</a></li>
    </ul>
  </nav>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  

  <header class="post-header">
    <h1 class="post-title"></h1>
  </header>

  <div class="post-content">
    <p>‚¨ÖÔ∏è<a href="/pages/module6/unit-assignments/unit6/m6u6.html">Back</a></p>

<h1 id="unit-6-codio-activity---pytest">Unit 6: Codio Activity - pytest</h1>

<p>This codio activity had us copy some code into a file, <code class="language-plaintext highlighter-rouge">wallet.py</code>, <code class="language-plaintext highlighter-rouge">test_wallet.py</code>, and run pytest against the <code class="language-plaintext highlighter-rouge">test_wallet</code> file, <code class="language-plaintext highlighter-rouge">pytest -q test_wallet.py</code>.</p>

<p>These are the two files it had us create:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># wallet.py
</span>
<span class="k">class</span> <span class="nc">InsufficientAmount</span><span class="p">(</span><span class="nb">Exception</span><span class="p">):</span>
    <span class="k">pass</span> 


<span class="k">class</span> <span class="nc">Wallet</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">initial_amount</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">balance</span> <span class="o">=</span> <span class="n">initial_amount</span>


    <span class="k">def</span> <span class="nf">spend_cash</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">amount</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">self</span><span class="p">.</span><span class="n">balance</span> <span class="o">&lt;</span> <span class="n">amount</span><span class="p">:</span>
            <span class="k">raise</span> <span class="nc">InsufficientAmount</span><span class="p">(</span><span class="sh">'</span><span class="s">Not enough available to spend {}</span><span class="sh">'</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">amount</span><span class="p">))</span>
        <span class="n">self</span><span class="p">.</span><span class="n">balance</span> <span class="o">-=</span> <span class="n">amount</span>


    <span class="k">def</span> <span class="nf">add_cash</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">amount</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">balance</span> <span class="o">+=</span> <span class="n">amount</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># test_wallet.py
</span>
<span class="kn">import</span> <span class="n">pytest</span>

<span class="kn">from</span> <span class="n">wallet</span> <span class="kn">import</span> <span class="n">Wallet</span><span class="p">,</span> <span class="n">InsufficientAmount</span>


<span class="k">def</span> <span class="nf">test_default_initial_amount</span><span class="p">():</span>
    <span class="n">wallet</span> <span class="o">=</span> <span class="nc">Wallet</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">wallet</span><span class="p">.</span><span class="n">balance</span> <span class="o">==</span> <span class="mi">0</span>


<span class="k">def</span> <span class="nf">test_setting_initial_amount</span><span class="p">():</span>
    <span class="n">wallet</span> <span class="o">=</span> <span class="nc">Wallet</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">wallet</span><span class="p">.</span><span class="n">balance</span> <span class="o">==</span> <span class="mi">100</span>


<span class="k">def</span> <span class="nf">test_wallet_add_cash</span><span class="p">():</span>
    <span class="n">wallet</span> <span class="o">=</span> <span class="nc">Wallet</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
    <span class="n">wallet</span><span class="p">.</span><span class="nf">add_cash</span><span class="p">(</span><span class="mi">90</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">wallet</span><span class="p">.</span><span class="n">balance</span> <span class="o">==</span> <span class="mi">100</span>


<span class="k">def</span> <span class="nf">test_wallet_spend_cash</span><span class="p">():</span>
    <span class="n">wallet</span> <span class="o">=</span> <span class="nc">Wallet</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
    <span class="n">wallet</span><span class="p">.</span><span class="nf">spend_cash</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">wallet</span><span class="p">.</span><span class="n">balance</span> <span class="o">==</span> <span class="mi">10</span>


<span class="k">def</span> <span class="nf">test_wallet_spend_cash_raises_exception_on_insufficient_amount</span><span class="p">():</span>
    <span class="n">wallet</span> <span class="o">=</span> <span class="nc">Wallet</span><span class="p">()</span>
    <span class="k">with</span> <span class="n">pytest</span><span class="p">.</span><span class="nf">raises</span><span class="p">(</span><span class="n">InsufficientAmount</span><span class="p">):</span>
        <span class="n">wallet</span><span class="p">.</span><span class="nf">spend_cash</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
</code></pre></div></div>

<p>The output of the pytest command was:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>codio@phantomsheriff-videofrog:~/workspace<span class="nv">$ </span>pytest <span class="nt">-q</span> test_wallet.py 
<span class="nt">-bash</span>: pytest: <span class="nb">command </span>not found
codio@phantomsheriff-videofrog:~/workspace<span class="nv">$ </span>
</code></pre></div></div>

<p>Very cool! At this point I ditched codio, because it‚Äôs complete garbage, and ran these locally while following the ‚Äúguide‚Äù in codio. In fact, you‚Äôll find the code to this activity in this unit‚Äôs location in the repository: <code class="language-plaintext highlighter-rouge">pages/module6/unit-assignments/unit6/codio-activity</code>, <a href="https://github.com/turbits/essex_eportfolio/blob/main/pages/module6/unit-assignments/unit6/codio-activity">here</a>.</p>

<p>After installing pytest and creating the files locally and running the tests I got:</p>

<p><code class="language-plaintext highlighter-rouge">$ pytest -q test_wallet.py</code></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>pytest <span class="nt">-q</span> test_wallet.py
.....                                                                                                            <span class="o">[</span>100%]
5 passed <span class="k">in </span>0.02s
</code></pre></div></div>

<p>Great! All tests passed. The activity then had us amend the tests so they fail, and that was the end of the activity. I did so:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># test_wallet_fail.py
</span>
<span class="kn">import</span> <span class="n">pytest</span>

<span class="kn">from</span> <span class="n">wallet</span> <span class="kn">import</span> <span class="n">Wallet</span><span class="p">,</span> <span class="n">InsufficientAmount</span>


<span class="k">def</span> <span class="nf">test_default_initial_amount</span><span class="p">():</span>
    <span class="n">wallet</span> <span class="o">=</span> <span class="nc">Wallet</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">wallet</span><span class="p">.</span><span class="n">balance</span> <span class="o">==</span> <span class="mi">182480</span>


<span class="k">def</span> <span class="nf">test_setting_initial_amount</span><span class="p">():</span>
    <span class="n">wallet</span> <span class="o">=</span> <span class="nc">Wallet</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">wallet</span><span class="p">.</span><span class="n">balance</span> <span class="o">==</span> <span class="mi">100</span>


<span class="k">def</span> <span class="nf">test_wallet_add_cash</span><span class="p">():</span>
    <span class="n">wallet</span> <span class="o">=</span> <span class="nc">Wallet</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
    <span class="n">wallet</span><span class="p">.</span><span class="nf">add_cash</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">wallet</span><span class="p">.</span><span class="n">balance</span> <span class="o">==</span> <span class="mi">100</span>


<span class="k">def</span> <span class="nf">test_wallet_spend_cash</span><span class="p">():</span>
    <span class="n">wallet</span> <span class="o">=</span> <span class="nc">Wallet</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">wallet</span><span class="p">.</span><span class="nf">spend_cash</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">wallet</span><span class="p">.</span><span class="n">balance</span> <span class="o">==</span> <span class="mi">10</span>


<span class="k">def</span> <span class="nf">test_wallet_spend_cash_raises_exception_on_insufficient_amount</span><span class="p">():</span>
    <span class="n">wallet</span> <span class="o">=</span> <span class="nc">Wallet</span><span class="p">()</span>
    <span class="k">with</span> <span class="n">pytest</span><span class="p">.</span><span class="nf">raises</span><span class="p">(</span><span class="n">InsufficientAmount</span><span class="p">):</span>
        <span class="n">wallet</span><span class="p">.</span><span class="nf">spend_cash</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</code></pre></div></div>

<p>Running pytest on our fail test file: <code class="language-plaintext highlighter-rouge">$ pytest -q test_wallet_fail.py</code></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>FFFFF                                                                                                            <span class="o">[</span>100%]
<span class="o">======================================================</span> FAILURES <span class="o">=======================================================</span>
_____________________________________________ test_default_initial_amount _____________________________________________

    def test_default_initial_amount<span class="o">()</span>:
        wallet <span class="o">=</span> Wallet<span class="o">()</span>
<span class="o">&gt;</span>       assert wallet.balance <span class="o">==</span> 182480
E       assert 0 <span class="o">==</span> 182480
E        +  where 0 <span class="o">=</span> &lt;wallet.Wallet object at 0x000002505EC1F070&gt;.balance

test_wallet_fail.py:8: AssertionError
_____________________________________________ test_setting_initial_amount _____________________________________________

    def test_setting_initial_amount<span class="o">()</span>:
        wallet <span class="o">=</span> Wallet<span class="o">(</span>1<span class="o">)</span>
<span class="o">&gt;</span>       assert wallet.balance <span class="o">==</span> 100
E       assert 1 <span class="o">==</span> 100
E        +  where 1 <span class="o">=</span> &lt;wallet.Wallet object at 0x000002505EBDA6E0&gt;.balance

test_wallet_fail.py:13: AssertionError
________________________________________________ test_wallet_add_cash _________________________________________________

    def test_wallet_add_cash<span class="o">()</span>:
        wallet <span class="o">=</span> Wallet<span class="o">(</span>10<span class="o">)</span>
        wallet.add_cash<span class="o">(</span>123<span class="o">)</span>
<span class="o">&gt;</span>       assert wallet.balance <span class="o">==</span> 100
E       assert 133 <span class="o">==</span> 100
E        +  where 133 <span class="o">=</span> &lt;wallet.Wallet object at 0x000002505EC1E170&gt;.balance

test_wallet_fail.py:19: AssertionError
_______________________________________________ test_wallet_spend_cash ________________________________________________

    def test_wallet_spend_cash<span class="o">()</span>:
        wallet <span class="o">=</span> Wallet<span class="o">(</span>2<span class="o">)</span>
<span class="o">&gt;</span>       wallet.spend_cash<span class="o">(</span>10<span class="o">)</span>

test_wallet_fail.py:24:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self <span class="o">=</span> &lt;wallet.Wallet object at 0x000002505EBDBAF0&gt;, amount <span class="o">=</span> 10

    def spend_cash<span class="o">(</span>self, amount<span class="o">)</span>:
        <span class="k">if </span>self.balance &lt; amount:
<span class="o">&gt;</span>           raise InsufficientAmount<span class="o">(</span><span class="s1">'Not enough available to spend {}'</span>.format<span class="o">(</span>amount<span class="o">))</span>
E           wallet.InsufficientAmount: Not enough available to spend 10

wallet.py:12: InsufficientAmount
___________________________ test_wallet_spend_cash_raises_exception_on_insufficient_amount ____________________________

    def test_wallet_spend_cash_raises_exception_on_insufficient_amount<span class="o">()</span>:
        wallet <span class="o">=</span> Wallet<span class="o">()</span>
<span class="o">&gt;</span>       with pytest.raises<span class="o">(</span>InsufficientAmount<span class="o">)</span>:
E       Failed: DID NOT RAISE &lt;class <span class="s1">'wallet.InsufficientAmount'</span><span class="o">&gt;</span>

test_wallet_fail.py:30: Failed
<span class="o">===============================================</span> short <span class="nb">test </span>summary info <span class="o">===============================================</span>
FAILED test_wallet_fail.py::test_default_initial_amount - assert 0 <span class="o">==</span> 182480
FAILED test_wallet_fail.py::test_setting_initial_amount - assert 1 <span class="o">==</span> 100
FAILED test_wallet_fail.py::test_wallet_add_cash - assert 133 <span class="o">==</span> 100
FAILED test_wallet_fail.py::test_wallet_spend_cash - wallet.InsufficientAmount: Not enough available to spend 10
FAILED test_wallet_fail.py::test_wallet_spend_cash_raises_exception_on_insufficient_amount - Failed: DID NOT RAISE &lt;class <span class="s1">'wallet.InsufficientAmount'</span><span class="o">&gt;</span>
5 failed <span class="k">in </span>0.07s
</code></pre></div></div>

  </div>

  

</article>

      </div>
    </main>

  </body>

</html>
